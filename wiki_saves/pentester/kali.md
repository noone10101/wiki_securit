---
title: Kali Linux
description: Déploiement opérationnel de Kali Linux
published: true
date: 2020-10-18T04:48:12.205Z
tags: 
editor: undefined
dateCreated: 2019-11-03T22:46:17.059Z
---

![Kali Wp June 2014 1920 X 1080 B](/uploads/kali-linux/kali-wp-june-2014-1920-x-1080-b.png "Kali Wp June 2014 1920 X 1080 B"){.align-center}
# Installation & Configuration

## Introduction

> **Kali Linux** est une distribution Linux basée sur **Debian** utilisée pour des tests de pénétration et des audits de sécurité avancés. Il est le successeur de **BackTrack**.
> 
> **Kali** contient plusieurs centaines d'outils destinés à diverses tâches de sécurité, telles que les tests d'intrusion (*pentest*), la recherche en sécurité (*audit*), l'investigation judiciaire (*Forensic*) et la rétro-ingénierie (*Reverse*). 
> 
> **Kali Linux** est développé, financé et mis à jour par **Offensive Security**, une entreprise leader dans la formation à la sécurité de l'information.



https://docs.kali.org/category/introduction

-----
## Téléchargement

Il est nécessaire pour la suite de l'installation de télécharger l'image officielle de Kali Linux : https://www.kali.org/downloads/

![Y 8 Genxoggf](/uploads/kali-linux/y-8-genxoggf.gif "Y 8 Genxoggf"){.align-center}

![Wf 91 Te 002 Gq 3](/uploads/kali-linux/wf-91-te-002-gq-3.gif "Wf 91 Te 002 Gq 3"){.align-center}

Pour une utilisation universelle de l'outil, nous vous recommendons de télécharger la version complète de Kali Linux.
> *A savoir : Une version déjà virtualisée est disponible pour VMWare et VirtualBox.*
{.is-info}

Dans notre exemple, nous utiliserons une image "**classique**" pour vous montrer toutes les étapes d'une installation, qu'elle soit virtualisée ou non.

![Firefox 36 Il 7 B 5 P 60](/uploads/kali-linux/firefox-36-il-7-b-5-p-60.png "Firefox 36 Il 7 B 5 P 60"){.align-center}

![Firefox Ss 3 N 00 F 18 L 12 Bp](/uploads/kali-linux/firefox-ss-3-n-00-f-18-l-12-bp.png "Firefox Ss 3 N 00 F 18 L 12 Bp"){.align-center}

-----

## Virtualisation

Pour une plus grande discrétion et une meilleur modularité : Kali Linux sera installé sur une machine virtuelle pouvant être clônée/sauvegardée/modifiée/détruite à tout moment.

Libre à chaque utilisateur d'effectuer ou non une installation virtualisée ou en dur (*auquel cas nous vous recommendons d'effectuer un dual boot*).

Nous n'aborderons pas ici les avantages et inconvéniants de la virtualisation, nous vous invitons à effectuer vos propres recherches (*nottament en matière de puissance de calcul via GPU*). 

Dans notre exemple nous utiliserons l'outil de virtualisation **VMware® Workstation 14 Pro** en version **14.1.1**.
https://www.vmware.com/fr/products/workstation-pro.html 

![Wspro Tp Head](/uploads/kali-linux/wspro-tp-head.png "Wspro Tp Head"){.align-center}

## Création de la machine virtuelle (*VM*)

Nous allons créer notre machine virtuelle qui accueillera notre Kali Linux.

**Pour Kali, les prérequis minimums sont les suivants :**

* **Stockage** : *20Gb pour l'installation | 70Gb et + recommandé.*
* **Mémoire** : *1GB en dégradé | 2Gb et + recommandé.*
* **Processeur** : *i386 ou amd64.*
* **Support de boot** : *CD-DVD ou USB.*

**Dans notre cas, nous allons utiliser la configuration suivante :**

* **Stockage** : *150Gb.*
* **Mémoire** : *8Gb.*
* **Coeurs Processeur** : *8.*
* **Adaptateur réseau** : *Bridge - Connexion directe au réseau.*

1.
![Tnttgsfmsj](/uploads/kali-linux/tnttgsfmsj.gif "Tnttgsfmsj"){.align-center}

2.
![I 5 Vt 2 Kuing](/uploads/kali-linux/i-5-vt-2-kuing.gif "I 5 Vt 2 Kuing"){.align-center}

3. 
![L 2 Htqj 8 Izl](/uploads/kali-linux/l-2-htqj-8-izl.gif "L 2 Htqj 8 Izl"){.align-center}

4.
![Pnsc 4 Ovkid](/uploads/kali-linux/pnsc-4-ovkid.gif "Pnsc 4 Ovkid"){.align-center}

-----

## Installation

Maintenant que la VM est configurée, nous allons pouvoir lancer l'installation de l'OS (*Operating System*).

![Eci 5 Sltomu](/uploads/kali-linux/eci-5-sltomu.gif "Eci 5 Sltomu"){.align-center}

Nous vous recommandons d'effectuer l'installation en mode graphique si aucun besoin de configuration poussée :

![Ta 45 Cropii](/uploads/kali-linux/ta-45-cropii.gif "Ta 45 Cropii"){.align-center}

1.
![Lkfsxxr 6 Hq](/uploads/kali-linux/lkfsxxr-6-hq.gif "Lkfsxxr 6 Hq"){.align-center}

2.
![Qap 8 H 3 V 4 Uv](/uploads/kali-linux/qap-8-h-3-v-4-uv.gif "Qap 8 H 3 V 4 Uv"){.align-center}

> **Remarque** : Pour une installation en dur, nous vous recommandons vivement un chiffrement des volumes via votre puce TPM (*Trusted Platform Module*).
{.is-warning}



3.
![Luakbcugny](/uploads/kali-linux/luakbcugny.gif "Luakbcugny"){.align-center}

4.
![Coq 1 Cxhjsr](/uploads/kali-linux/coq-1-cxhjsr.gif "Coq 1 Cxhjsr"){.align-center}

5.
![05 Qjy 4 Bcxm](/uploads/kali-linux/05-qjy-4-bcxm.gif "05 Qjy 4 Bcxm"){.align-center}

> **L'installation est maintenant terminée et votre VM a redémarrée automatiquement sur l'OS via GRUB.**
{.is-success}


-----

## Outils d'intégration VMWare

Maintenant que notre VM est opérationnelle, il ne nous reste plus qu'à la configurer.
Commençons par ouvrir notre session avec les identifiants suivants :

> **User** : *root*
> **MDP** : *Celui renseigné lors de l'installation.*
{.is-info}


> **ATTENTION** : *Le compte utilisé est **super-administrateur** !!! Toute commande ou action effectuée avec ce compte est définitive et sans avertissement. Il est très facile de détruire une machine via une mauvaise commande...*
{.is-danger}


![Gvauscxrgc](/uploads/kali-linux/gvauscxrgc.gif "Gvauscxrgc"){.align-center}

### Installation VM Tool

Afin de pouvoir bénéficier des services d'intégration avancés (*glisser-déposer, CRTL-C/CTRL-V, redimensionnement automatique de la fenêtre, meilleure résolution, capture raccourci clavier, etc.*), il est nécessaire d'insérer le disque virtuel de VMWare dans la VM.

![Jzsi 5 C 3 I 7 E](/uploads/kali-linux/jzsi-5-c-3-i-7-e.gif "Jzsi 5 C 3 I 7 E"){.align-center}

Il faut ensuite extraire l'archive présente sur le disque.

![Kpnb 4 Onbyz](/uploads/kali-linux/kpnb-4-onbyz.gif "Kpnb 4 Onbyz"){.align-center}

Ne reste plus qu'a lancer l'installation. 
Lancez un terminal dans le répertoire **vmware-tools-distrib** puis la commande :

```cirru
./vmware-install.pl
```

![Klkzedgua 8](/uploads/kali-linux/klkzedgua-8.gif "Klkzedgua 8"){.align-center}

![Vmware Twdriyk 6 Kd](/uploads/kali-linux/vmware-twdriyk-6-kd.png "Vmware Twdriyk 6 Kd"){.align-center}

Une fois fait, relancez votre VM pour bénéficier des nouvelles fonctionnalités.

-----

## Configuration réseau

Afin de pouvoir poursuivre la configuration de notre VM Kali, il est important de vérifier notre connexion réseau.

### Configuration dynamique DHCP

Par défaut, le serveur DHCP du switch virtuel VMWare distribue automatiquement une adresse à votre machine virtuelle.
> Il est cependant important de vérifier notre configuration réseau actuelle.
{.is-warning}


```cirru
ip a
```

![6 Xp 2 Gi 3 Iuu](/uploads/kali-linux/6-xp-2-gi-3-iuu.gif "6 Xp 2 Gi 3 Iuu"){.align-center}

```cirru
netstat -rn
```

![Yaoik 1 Xi 3 B](/uploads/kali-linux/yaoik-1-xi-3-b.gif "Yaoik 1 Xi 3 B"){.align-center}

```cirru
cat /etc/resolv.conf
```

![Flbdaqbaxe](/uploads/kali-linux/flbdaqbaxe.gif "Flbdaqbaxe"){.align-center}

Dans notre exemple :

* **Adresse IP** : *192.168.1.45*
* **Masque** : *255.255.255.0 CIDR /24*
* **Broadcast** : *192.168.1.255*
* **Gateway** : *192.168.1.10*
* **DNS** : *192.168.1.10 ; 1.1.1.1 ; 8.8.8.8*

Afin de libérer et rénouveler le lease DHCP :

```cirru
dhclient -r eth0
dhclient eth0
```

OU

```cirru
ifdown eth0
ifup eth0
```

![Gbayii 30 Ji](/uploads/kali-linux/gbayii-30-ji.gif "Gbayii 30 Ji"){.align-center}

### Configuration statique non-persistante

En fonction des cas de figure, il peut être intéressant de spécifier une adresse IP statique sur une interface. 

Soit pour une application spécifique (*client-serveur*), soit pour une interraction plus furtive sur un réseau (*suppression du broadcast DORA DHCP pouvant alerter un DSI*).

```cirru
ifonconfig eth0 192.168.204.128/24 /*Adresse statique*/
route add default gw 192.168.204.1 /*Gateway*/
echo nameserver 192.168.204.10 > /etc/resolv.conf /*DNS*/
```

> **Remarque** : Les modifications ci-dessus sont non-persistantes (*temporaires*). Elles disparaîtrons au reboot de Kali Linux.
{.is-warning}


### Configuration statique persistante

Pour effectuer une configuration en dur qui soit permanente, il est nécessaire de modifier le fichier :  ***/etc/network/interfaces***

```cirru
auto eth0
iface eth0 inet dhcp
#iface eth0 inet static
#address 192.168.1.100
#netmask 255.255.255.0
#network 192.168.1.0
#broadcast 192.168.1.255
#gateway 192.168.1.1
```

![Owjkq 8 Abl 9](/uploads/kali-linux/owjkq-8-abl-9.gif "Owjkq 8 Abl 9"){.align-center}

1. Commentez la ligne ci-dessous pour désactiver le DHCP sur l'interface en question :

```cirru
#iface eth0 inet dhcp
```

2. Décommentez et modifiez les autres lignes : 

```cirru
address 0.0.0.0 /*Adresse IP*/
netmask 0.0.0.0 /*Masque sous-réseau*/ 
network 0.0.0.0 /*Adresse réseau*/
broadcast 0.0.0.0 /*Adresse broadcast*/
gateway 0.0.0.0 /*Adresse gateway*/
```

3. Enfin, pour que les changements prennent effet, relancez votre carte réseau via les commandes :

```cirru
ifdown eth0
ifup eth0
```

### Configuration Proxy

En fonction de votre environnement de travail, il est possible que vous soyez soumis à l'utilisation d'un serveur mendataire proxy.

Pour vous authentifier et configurer ce serveur, il est nécessaire de modifier les fichiers : ***/root/etc/bash.bashrc*** ET ***/root/etc/apt.conf***.

1. Dans le fichier **bashrc**, ajoutez les lignes suivantes :

```cirru
export ftp_proxy="ftp://utilisateur:password@proxyIP:port"
export http_proxy="http://utilisateur:password@proxyIP:port"
export https_proxy="https://utilisateur:password@proxyIP:port"
export socks_proxy="https://utilisateur:password@proxyIP:port"
```

> **Remarque** : Si votre serveur mendataire ne requière pas d'authentification, utilisez uniquement la partie succédant le symbole **@**.
{.is-warning}


```cirru
export ftp_proxy="ftp://proxyIP:port"
```

2. Dans le fichier **apt.conf**, ajoutez les lignes suivantes :

```cirru
Acquire::ftp::proxy "ftp://utilisateur:password@proxyIP:port/";
Acquire::http::proxy "http://utilisateur:password@proxyIP:port/";
Acquire::https::proxy "https://utilisateur:password@proxyIP:port/";
Acquire::socks::proxy "https://utilisateur:password@proxyIP:port/";
```

3. Fermez et rouvrez votre session pour que les changements prennent effet.

-----

## Mise à jour et upgrade

Il est maintenant nécessaire de configurer notre Kali afin de le rendre pleinement opérationnel et sécurisé.

La première chose à faire est de s'assurer que notre version est à jour. 

Pour se faire, nous allons vérifier que les bons repositories (*serveurs de dépot des packages et patchs*) soient présents dans le système. 

> **Il est important d'avoir les repositories officiels pour éviter les surprises.**
{.is-warning}


**Fichiers de configuration des dépots** : */etc/apt/sources.list*
**Liste des dépots officiels** : 

```cirru
deb http://http.kali.org/kali kali-rolling main non-free contrib
deb-src http://http.kali.org/kali kali-rolling main non-free contrib
```

![Oqkfyrtwiv](/uploads/kali-linux/oqkfyrtwiv.gif "Oqkfyrtwiv"){.align-center}

Maintenant que nous avons les bons serveurs de dépot, nous allons pouvoir lancer la mise à jour et la montée de version le cas échéant.

```cirru
apt-get update && apt-get dist-upgrade
```

L'opération peut être longue. 
Nous recommandons d'effectuer des reboots et de relancer plusieurs fois la commande de mise à jour afin d'être certain_ne que votre système soit bien à jour.

> **Remarque** : Certaines étapes requièrent une intéraction/choix de la part de l'utilisateur : **surveillez de temps en temps votre terminal**.
{.is-warning}


![Ftzjo 238 Ih 2 Qx](/uploads/kali-linux/ftzjo-238-ih-2-qx.gif "Ftzjo 238 Ih 2 Qx"){.align-center}

L'objectif étant d'obtenir ce résultat :

![Vmware Ejjfqubfmj](/uploads/kali-linux/vmware-ejjfqubfmj.png "Vmware Ejjfqubfmj")

Nous allons nettoyer les paquets de dépendance inutiles :

```cirru
apt-get autoremove
```

![Mgd 7 Fmlmxp](/uploads/kali-linux/mgd-7-fmlmxp.gif "Mgd 7 Fmlmxp"){.align-center}

Enfin supprimez le cache des paquets périmés :

```cirru
apt-get autoclean
```

![Hx 9 Lohtd 4 Y](/uploads/kali-linux/hx-9-lohtd-4-y.gif "Hx 9 Lohtd 4 Y"){.align-center}

-----

## Secure Shell (SSH)

Kali Linux dispose d'un serveur SSH pour une prise de main à distance en ligne de commande.

> **Remarque** : *Pour des raisons de furtivité et pour éviter d'être détecté sur un réseau fraîchement connecté, les services utilisants des ports d'écoute sont désactivés par défaut.*
{.is-warning}


> **Pour limiter le risque d'attaque Man-In-The-Middle via l'usurpation de clés dpkg, il est PRIMORDIAL de regénérer ces clés !**
{.is-danger}


1. Effectuez un backup des clés par défaut via les commandes suivantes :

```cirru
cd /etc/ssh
mkdir keys_backup
mv ssh_host_* keys_backup
```

2. Regénérez les clés avec la commande suivante :

```cirru
dpkg-reconfiguration openssh-server
```

![Qge 22 G 76 Nm](/uploads/kali-linux/qge-22-g-76-nm.gif "Qge 22 G 76 Nm"){.align-center}

### Activation/Désactivation serveur SSH

Pour activer le serveur SSH sur votre machine utilisez la commande suivante :

```cirru
/etc/init.d/ssh start
```

![Cowavgfd 5 Y](/uploads/kali-linux/cowavgfd-5-y.gif "Cowavgfd 5 Y"){.align-center}

Pour vérifier si le serveur SSH est activé et écoute sur le port 22, utilisez la commande suivante :

```cirru
netstat -antp
```

![Fct 0 Pw 7 Qfj](/uploads/kali-linux/fct-0-pw-7-qfj.gif "Fct 0 Pw 7 Qfj"){.align-center}

Pour désactiver le serveur SSH sur votre machine utilisez la commande suivante :

```cirru
/etc/init.d/ssh stop
```

![Edidusvapp](/uploads/kali-linux/edidusvapp.gif "Edidusvapp"){.align-center}

-----

## Ajout utilisateur non-root

Afin de limiter les risques de déterioration du système via une mauvaise commande ou modification, il peut être utile de créer un utilisateur qui ne soit pas root.

```cirru
adduser Nom_Utilisateur
```

![Ojcufesfpm](/uploads/kali-linux/ojcufesfpm.gif "Ojcufesfpm"){.align-center}

Pour ajouter un utilisateur dans le groupe administrateur, utilisez la commande suivante :

```cirru
usermod -aG sudo Nom_Utilisateur
```

![Popzginwkj](/uploads/kali-linux/popzginwkj.gif "Popzginwkj"){.align-center}

-----

## Ajout logiciels utiles

Kali Linux est une véritable boite à outils avec de nombreux logiciels pré-embarqués.
Nous vous conseillons tout de même d'ajouter ces applis pour une meilleure expérience.

### Preload

> Preload permet d'utiliser une partie de la mémoire vive de votre ordinateur afin de pré-charger les applications que vous utilisez le plus souvent. Pour y arriver, il analyse vos habitudes afin de cibler ces applications et vous faire gagner ainsi de précieuses secondes au lancement de ces applications.
{.is-info}


https://doc.ubuntu-fr.org/preload

```cirru
apt-get install preload
```

Aucune autre manipulation n'est nécessaire pour lancer ce service qui se met directement au travail. 

### BleachBit

> BleachBit vous permettra d'effacer en profondeur et de façon définitive vos traces numériques. Cache, cookies, historiques, identifiants, mots de passe, restauration de session, marques page, etc. disparaitront si vous en faites la demande. Il se chargera de vider la corbeille et le presse-papiers, d'éliminer la liste des fichiers consultés récemment, et de supprimer les fichiers temporaires.
{.is-info}


https://www.bleachbit.org/

```cirru
apt-get install bleachbit
```

### Boot Up Manager (BUM)

> Le logiciel BootUp-Manager également appelé bum est un gestionnaire graphique de services système, ayant la particularité de pouvoir sélectionner les services système devant être démarrés au chargement et ceux ne devant pas l'être. 
{.is-info}


https://doc.ubuntu-fr.org/bum

```cirru
apt-get install bum
```

### Gnome-Do

> GNOME Do (ou Do) est un lanceur d'applications qui permet de lancer des applications ainsi que de rechercher des fichiers sur son disque dur de façon rapide et intuitive.
{.is-info}


https://doc.ubuntu-fr.org/gnome-do

```cirru
apt-get install gnome-do
```

### Scrub

> Scrub est un utilitaire de nettoyage utilisant des algorythmes de classe militaire (National Nuclear Security Administration) sur des fichiers, des répertoires ou des unités de disque afin de rendre plus difficile la récupération des données. L'utilisation de scrub est plus rapide que l'écriture de données aléatoires sur un disque. Ce processus offre une haute disponibilité, fiabilité et protection des données.
{.is-info}


https://www.systutorials.com/docs/linux/man/1-scrub/

```cirru
apt-get install scrub
```

-----

## Chiffrement dossier sécurisé

![13097](/uploads/kali-linux/13097.jpg "13097"){.align-center}

> **Il est important d'avoir un volume chiffré afin de protéger vos documents critiques comme vos résultats d'audits, DCP (Données à Caractère Personnel), Dictionnaires, etc.**
{.is-warning}


> **VeraCrypt** est un logiciel utilitaire sous licence libre utilisé pour le chiffrement à la volée. Il est développé par la société française IDRIX et permet de créer un disque virtuel chiffré dans un fichier ou une partition.
{.is-info}


https://www.veracrypt.fr/en/Home.html

### Installation de VeraCrypt

Téléchargez le package d'installation officiel sur le site de VeraCrypt : https://www.veracrypt.fr/en/Downloads.html

![Ktiwkoei 4 E](/uploads/kali-linux/ktiwkoei-4-e.gif "Ktiwkoei 4 E"){.align-center}

1. Créez un dossier pour l'extraction des sources d'installation : 

```cirru
cd ~/Téléchargements
mkdir veracrypt-installer
```

2. Placez-vous dans votre nouveau dossier et lancez l'extraction :

```cirru
cd veracrypt-installer
tar xjpf ../veracrypt-*.tar.bz2
```

3. Activez les droits d'exécution :

```cirru
chmod -R +x .
```

![M 2 Zanwt 0 L 3](/uploads/kali-linux/m-2-zanwt-0-l-3.gif "M 2 Zanwt 0 L 3"){.align-center}

4. Lancez l'installation de l'application :

```cirru
./veracrypt-1.24-setup-gui-x64
```

![R 18 Jdpvlvs](/uploads/kali-linux/r-18-jdpvlvs.gif "R 18 Jdpvlvs"){.align-center}

### Configuration de VeraCrypt


1. Créez un fichier dans le répertoire de votre choix, celui-ci deviendra votre volume chiffré :

```cirru
touch Pandore
```

2. Lancez **VeraCrypt** puis créez votre nouveau volume chiffré comme suit :

```cirru
Veracrypt
```

Nous créerons un volume standard qui pourra à l'avenir accueillir un second volume caché (*pour faire face aux "situations critiques" où l'on pourrait être obligé de donner son password*).

Nous utiliserons l'algorythme de chiffrement **AES** (*catégorie militaire US Top Secret*) et de hash **SHA-512** créé par la NSA.

![2 C 7 Kami 1 Fbe](/uploads/kali-linux/2-c-7-kami-1-fbe.gif "2 C 7 Kami 1 Fbe"){.align-center}

![12 Vmware Noulbqmena](/uploads/kali-linux/12-vmware-noulbqmena.png "12 Vmware Noulbqmena"){.align-center}

> Notre volume chiffré maintenant créé, nous allons pouvoir le monter virtuellement afin de l'utiliser :
{.is-success}


![Vmware 9 Xise 3 Z 82 A](/uploads/kali-linux/vmware-9-xise-3-z-82-a.png "Vmware 9 Xise 3 Z 82 A"){.align-center}

![Iot 0 By 44 N 9](/uploads/kali-linux/iot-0-by-44-n-9.gif "Iot 0 By 44 N 9"){.align-center}

![Vmware Eklekehg 3 W](/uploads/kali-linux/vmware-eklekehg-3-w.png "Vmware Eklekehg 3 W"){.align-center}

-----

# Premiers pas

> Félicitations, vous êtes en possession de votre propre outils de ~~destruction~~ travail... avec de grands pouvoirs...viennent de grandes responsabilités...
{.is-success}

> Si c'est la première fois que vous touchez à une machine sous un environnement Débian ou que vous voulez revoir les bases, pas de panic, c'est par ici :
{.is-warning}


Kali étant une distribution GNU/Linux basée sur Débian, vous trouverez de la documentation à foison à la fois sur la plateforme officielle Kali et sur celle de Débian.

Pour Débian : <kbd>https://www.debian.org/doc/</kbd>
Pour Kali : <kbd>https://www.kali.org/docs/</kbd>
Pour Kali : <kbd>https://forums.kali.org</kbd>

![vmware_tbwvlnr7s6.png](/uploads/kali-linux/vmware_tbwvlnr7s6.png){.align-center}

Contrairement à Windows, la barre des tâches est nativement située au sommet de l'écran. 

- Le menu principal des applications est situé dans le coin supérieur gauche.
- Le menu de configuration réseau ainsi que le menu de démarrage est situé dans le coin supérieur droit.

Le menu principal de Kali Linux comprend des liens catégoriels pour de nombreux outils présents dans la distribution. Cette structure aide à clarifier le rôle principal de chaque outil ainsi que le contexte de son utilisation.

> Le rôle principal de chaque outils peut être trouvé ici : https://tools.kali.org/
{.is-info}


![vmware_dojhkyfkvk.png](/uploads/kali-linux/vmware_dojhkyfkvk.png){.align-center}

> Je vous invite maintenant à rejoindre la section suivante (**Linux Basics**) pour poursuivre votre formation.
{.is-success}
